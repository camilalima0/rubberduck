// .devcontainer/devcontainer.json
{
    "name": "Python 3 & Web App (Ubuntu Base)",
    // Usar uma imagem base Ubuntu/Debian, que é mais compatível
    "image": "mcr.microsoft.com/devcontainers/python:3", // Esta imagem já vem com Python 3.x e é baseada em Debian/Ubuntu
    
    // Comandos que serão executados *após* a criação do contêiner.
    // Agora inclui a instalação do Flask e Stripe via pip após o Stripe CLI via apt.
    "postCreateCommand": "sudo apt update && sudo apt install -y curl gnupg && curl -s https://packages.stripe.dev/api/security/keypair/stripe-cli-gpg/public | gpg --dearmor | sudo tee /usr/share/keyrings/stripe.gpg && echo \"deb [signed-by=/usr/share/keyrings/stripe.gpg] https://packages.stripe.dev/stripe-cli-debian-local stable main\" | sudo tee -a /etc/apt/sources.list.d/stripe.list && sudo apt update && sudo apt install -y stripe && pip install --no-cache-dir flask stripe",

    "forwardPorts": [5000],

    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance"
            ]
        }
    }
}